<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ú–∞—Ç—Ä–∏—Ü—ã –°—É–¥—å–±—ã</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>–ê—Å—Ç—Ä–æ–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è SOUL</h1>
        <h3>üåø –° –ø–æ–º–æ—â—å—é –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏–∏, –ø–æ–º–æ–≥—É:</h3>
        <h4>üîπ–∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ —Ç—è–Ω–µ—Ç –Ω–∞–∑–∞–¥/–≤–Ω–∏–∑</h4> 
        <h4>üîπ–æ–±—Ä–µ—Å—Ç–∏ —Å–µ–±—è –∏ —Å–≤–æ–π –∏—Å—Ç–∏–Ω–Ω—ã–π –ø—É—Ç—å</h4>
        <h4>üîπ–æ—Ç–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–∞—Ö–∏, —Å–æ–º–Ω–µ–Ω–∏—è, –±–æ–ª—å</h4>
        <h4>üîπ—É–≤–µ—Ä–µ–Ω–Ω–æ –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è –≤ —Å–æ—Ü–∏—É–º–µ, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å–≤–æ–µ–π —Å—É—Ç—å—é</h4>
        <h4>üîπ–Ω–∞—á–∞—Ç—å –∂–∏—Ç—å, –∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å</h4>
    </header>
    <h2>–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å–≤–æ—é –ú–∞—Ç—Ä–∏—Ü—É –°—É–¥—å–±—ã</h2>
    <main>
        <form id="calcForm" method="POST">
            <label for="birthdate">–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
            <input type="date" id="birthdate" name="birthdate" min="1900-01-01" required>

            <label for="email">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à e-mail:</label>
            <input type="email" id="email" name="email" placeholder="example@mail.com" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}" required>

            <div class="button-container">
                <button type="submit">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            </div>
        </form>
        <div id="result"></div>
    </main>
    <footer>
        <p>¬© 2024 –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ú–∞—Ç—Ä–∏—Ü—ã –°—É–¥—å–±—ã</p>
    </footer>
    <script>
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É –∫–∞–∫ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('birthdate').setAttribute('max', today);

        // AJAX –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('calcForm').addEventListener('submit', function(event) {
            event.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

            const birthdateInput = document.getElementById('birthdate').value;
            const emailInput = document.getElementById('email').value;

            if (!birthdateInput) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è.');
                return;
            }

            if (!document.getElementById('email').validity.valid) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π e-mail.');
                return;
            }

            const formData = new FormData();
            formData.append('birthdate', birthdateInput);
            formData.append('email', emailInput);

            fetch('send_email.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text()) // –û–∂–∏–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
            .then(result => {
                document.getElementById('result').innerHTML = result;
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('result').innerHTML = '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
            });
        });
    </script>
</body>
</html>
